<head>
	<title>t-pot『SIG-GT9 「ゲーム開発における数学」』</title>
	<link rel="stylesheet" type="text/css" href="../if.css">
</head>
<meta http-equiv=Content-Type content="text/html; charset=shift_jis">
<body>


<div class="contents">
<center>
<BR CLEAR=ALL>
<BR CLEAR=ALL>
<h1>ゲーム開発における数学</h1><br>
<h3>〜 「IDGA 日本ゲームテクノロジー研究会」メモ 〜</h3>
<BR CLEAR=ALL>
<BR CLEAR=ALL>
<BR CLEAR=ALL>
<!--<image src = "title.png">-->
<br>
<hr>
</center>
<div>


<h2>■はじめに</h2>


<p>
今回は、IGDA日本の日本ゲームテクノロジー研究会(SIG-GT)による数学の話に行ってきました。
<a href="http://www6.plala.or.jp/mnagaku/">長久さん</a>や、
OLMデジタルの安生さんによるお話でした。<br>
あまり時間のパネルディスカッションで私も立たされましたけど、
別にたいしたことは言ってません。
</p>

<p>
基本的にセミナー中にメモったものを起こし直したので、
聞き漏らしたり、勘違いしているところがあると思います。すいません。
</p>

<hr>

<h2>■新さんの前説</h2>
<p>
ＣＥＤＥＣ：９月の２週か３週<br>
後援者募集中。
</p>

<hr>
<h2>■ＣＧ−ＡＲＴＳ協会</h2>
<h3></h3>
<p>
文化祭メディア芸術祭開催中<br>
ＣＧ−ＡＲＴＳの教科書にアドバイスがあったらください。<br>
安生さんは、ＣＧ検定の立ち上げに協力してくださっている、とても良いお方なので、みんな勉強してね。
</p>

<hr>
<h2>■長久</h2>
<h3>前振り</h3>
<p>
２００１−２００６にゲーム専門学校で数学を教えていた。<br>
微積がわからない人が結構いる。<br>
今日は、高校数学に四苦八苦した人を対象。<br>
　会場でアンケートをとったときの、出席者のメインターゲットは、大学で数学をやっていた人。<br>
<br>
数学が美しいというが、数学が嫌われているというのは、鉄道マニアの人が興味を押し付けているようなもん（失礼）。なので今日はそのような話はしない。<br>
数学が役にやつものだということはコンセンサスは得られている。
</p>
<h3>数学の仕組み</h3>
<p>
今の数学は、代数学が基礎的な領域に入ってきた。<br>
　基礎論：集合論、論理学（意識のあるなしはあるがプログラミングで使っているはず）、計算理論、証明<br>
　代数学：代数方程式論、線形代数、群論<br>
　幾何学：ユークリッド幾何学、位相幾何学（衝突判定などの空間把握に必須）<br>
　解析学：微分方程式論、解析関数学、確率論（時空的な変化の表現に必須）<br>
数学は、単純な概念を組み合わせて非常に複雑な概念を作っている。<br>
　スパゲッティ化されて、ソフトウェア工学的に見るとかなり末期的<br>
　近年は公理主義が発展したが、結局何がしたいかわからなくなっている。<br>
　美しい数学はＦ１の世界。普通の人が便利に生活するための数学がやられていない。
</p>
<h3>実用に向いた戦車みたいな数学を指向したい</h3>
<p>
一般化された代数的解法は難しいが、幾何学的解析に持ち込めばコンピュータで解ける問題に帰着できる。<br>
コンピュータで解ける問題を知って、コンピュータに解ける問題に変形することを考えれば色々できる。<br>
これは、高校数学でけっこうできる。<br>
　メインループをまわして色々することは、逐次的な数値計算を行うことと等しいので、実はみんなやっている。<br>
応用として<br>
　確率論：乱数とかで皆さん使うでしょう<br>
　統計学：「数学ではない」といわれる時がある（おいしいとこ取りしていると思われている？）。因果関係の証明はしないで、関係性だけを調べる。
</p>
<h3>統計学</h3>
<p>
関係性を調べる<br>
相関：散布図を描いた時等に、関係があるかどうか？<br>
　比例、指数、対数、周期性<br>
比例（基本的な関係）<br>
　用語<br>
　　相関係数：各点の直線への集まり具合<br>
　　回帰直線：点が帰属していると想定する直線<br>
　　　これが明らかになると、１つの属性から別の属性が推測できる。<br>
　求め方<br>
　　最小二乗法<br>
　　　距離の２乗の和が最小になるように調整<br>
　ただし、変数を多くしたからといって、精度が上がるとは限らない<br>
　精度を上げるための数学的な手法が存在<br>
　　その１つが主成分分析<br>
　　　属性を組み合わせて本質的な量を求める。<br>
　　　少ない基底で張るための方法を考えるので、固有値問題になる。
</p>
<h3>ゲーム開発に必要な数学知識</h3>
<p>
ライブラリも増えてきたけど、その中を探りたくなるときも良くある。<br>
どこまで知ればよい？<br>
　高校数学から１９世紀の数学<br>
　２０世紀の数学は抽象化され来て邪魔なことが多い。
</p>
<h3>数学の歴史</h3>
<p>
成立過程はなかなか教えてくれない。<br>
知っていれば、「あぁ、仕方ないよね」といえて、興味が増えるのでは。<br>
学習指導要領はいろいろと努力していて、なかなかすごい。<br>
最近は、美しい数学が盛り上がっているが、難しいのでバランスをとるために力強い数学をすすめたい。<br>
プログラミングができれば、数学的な世界が頭の中でできているはずなので、
数学が役に立つことを伝えられるかなぁと思っている。
</p>

<hr>
<h2>■安生さん、その１</h2>
<h3>数学の重要性は増大している</h3>
<p>
入力は直感的にやりたい（数値を入力するのさえ嫌がられる）<br>
出力は高速に行いたい<br>
優れたＧＵＩが求められている<br>
でも、やると高効率化が図れる
</p>
<h3>演出可能なトゥーンシェーダ</h3>
<p>
どのくらいトゥーンを仕事でやっている？ -> ぱらぱらと手を上げる<br>
演出可能なトゥーンシェーダの紹介<br>
　変な陰影を手で修正（ライティングでは部分的な修正ができない）<br>
　時間経過でもそれがシームレスに繋がる<br>
論文を書くことが目的ではなく、作ったものは全てプラグイン化して、使える機能を追加して現場に下ろしている。
</p>
<h3>アイデア</h3>
<p>
　ペイントストロークにマッチした輝度補正<br>
　ある範囲は、陰影の強さを変えるが、あるところより外は変えない補間<br>
　メッシュ上で計算。RBF(Radial Basis Function、大きさで基底が決まる関数) で補間。<br>
　１次式に載せられて、コンピュータで解ける。<br>
　ただ、試してみてうまく行く奴として使ったので、まだ色々とできるのかも。<br>
　これを最小２乗法を用いて解く。
</p>
<h3>Lagrange の未定乗数法</h3>
<p>
最小２乗法と共に使える便利な数学ツール。<br>
式の解では、法線がパラメータを変えたときの変化方向になっている。<br>
こういう話はしょっちゅう出てくるでしょう。
ただ、高次元を扱いたい（Ｎ変数、Ｎ次元、制約条件を増やす）
</p>

<h3>Q&A</h3>
<p>
Q. ゲームだと法線をいじるけど、そうしなかったのは？<br>
A. ゲームには難しい。直すための労力を最小にする手法だった。法線を考える必要はない。効果は同じでは？<br>
Q. カメラの位置が変わったときのパラメータの対応は？<br>
A. キーフレームで筆入れをして、その間は補間<br>
Q. 拘束条件を増やせばもっと簡単に（細かな制御を減らして）濡れるのでは？（馬場さん）<br>
A. 暴れさせないこともできるが計算が複雑になる。
</p>

<h2>■安生さん、その２</h2>
<h3>Latent Doodle Space</h3>
<p>
線画を学習して、似た絵を作成してくれる。<br>
ポケモンの背景画の群集を簡単にできるように。<br>
　もちろん、線画では駄目で色は塗らないといけないが難しい。<br>
　アニメーションを作るまではやりたいがそれはかなりすごいこと<br>
手書きでいくつかの文字を書いて、それと似た文を描く。
</p>
<h3>方法</h3>
<p>
高次元の補間＋低次元の制御<br>
　手書き情報は高次元空間の点(Latent Doodle Space)<br>
　低次元から高次元への写像を入力データから学習して構築<br>
最良の対応付け＋ユーザーによる学習<br>
いくつかの方法が考えられる<br>
　PCA, RBF, GP, GPLVM<br>
　ＥＧでは全て実装したが、今回は、PCA+RBF<br>
PGA<br>
　多次元データに対して、情報を極力損なわないように低次元化<br>
　線形な表現を仮定<br>
　ばらつきが大きな軸を主成分と考える<br>
　分散が最大になるように基底の結合係数が極値になるようにLagrangeの未定乗数法で解く。<br>
　元の行列は、特異値分解で大きな固有値がわかるので、それをコントロール空間とできる。<br>
PCA+RBF<br>
　ストロークのストロークの対応点の集まりをRBFで近似する。<br>
　ある微分方程式の一般解がRBFになっていたので、RBFを採用した。<br>
　RBFはDoodle Space に限らず使えるので、おいしいツール
</p>
<h3>数学をどう思うか</h3>
<p>
解析学：パラメータを使う分野（パラメータを求める分野）<br>
代数学：同上<br>
　幾何学<br>
確率：パラメータ自体を探す分野<br>
統計：同上

どれも必要な分野
</p>

<h3>Q&A</h3>
<p>
Q. 拘束条件（剛性など）を入れたらもっと面白い絵が作れない？(馬場さん)<br>
A. やってる人はいる。これはまだ途中。アニメーションまで使えるとすると、モーフィングの問題が出てきて、解決中。<br>
Q. Green 関数が逆じゃない？(馬場さん)<br>
A. log r でも性質は同じでは一般解は難しい<br>
Q. φが輝度とどう結びつく？何を勉強すればよい？<br>
A. 関数を仮定して、パラメータを塗られた情報から決めていく。金谷先生のだが、その先はSIGの論文<br>
Q. Ci は制約点の座標、hiが輝度の補正値で、xにCjが入ると、wjが消えて欲しかったりないの？<br>
A. 線形補間の式などとはちょっと違う。とり方はいろいろあるが、何をとれば良いかと言う理論は別にある。

Doodle で対応付けを変えたときに、オリジナル画像のパラメータ空間での位置が変わるときはないの？

<hr>
<h2>■パネルディスカッション</h2>
<h3></h3>
<p>
</p>


<h2>■感想</h2>

<p>
ＯＬＭデジタルさんは、きちんとプラグインを作って現場に下ろせるところまで作りこんでえらいなぁ<br>
なんか、質問をしている人は、「全部理解してやろう」と、生真面目な感じがしました。

</p>

<p>
パネルに出てると、メモれません…
</p>

</div>
<br clear=all>
<br clear=all>
<br clear=all>
<center>
<hr>
<p><a href="../index.html">もどる</a></p>
<p><a href="mailto:imagire@gmail.com">imagire@gmail.com</a></p>
</center>

</body>
</html>
