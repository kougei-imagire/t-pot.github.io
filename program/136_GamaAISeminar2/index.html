<head>
	<title>t-pot『ゴール指向プランニング』</title>
	<link rel="stylesheet" type="text/css" href="../if.css">
</head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<body>


<div class="contents">
<center>
<BR CLEAR=ALL>
<BR CLEAR=ALL>
<h1> ゴール指向プランニング</h1><br>
<h3>～ 「ゲームAI連続セミナー第2回」レポート ～</h3>
<BR CLEAR=ALL>
<BR CLEAR=ALL>
<BR CLEAR=ALL>
<!--<image src = "title.png">-->
<br>
<hr>
</center>
<div>


<h2>■はじめに</h2>


<p>
<a href="http://www6.plala.or.jp/mnagaku/">長久さん</a>や三宅さんがやっている<a href="http://www.igda.jp/modules/news/article.php?storyid=1072">「ゲームAI連続セミナー」 の第２回</a>に行ってみました。
今回のテーマは、ゴール指向アクションプランニングです。<br>
今回から、５人ぐらいで話し合う、グループ討論が始まりました。
</p>

<p>
基本的にセミナー中にメモったものを起こし直したので、
聞き漏らしたり、勘違いしているところがあると思います。すいません。
</p>

<hr>

<h2>■１回の反省点</h2>

<p>
発言機会が少ない->グループディスカッションを追加<br>
まとまりが無い->テーマを先に選出<br>
事前に知りたい->事前に資料配布（ただし本番まで変更する）
</p>

<hr>

<h2>■ゲームAIの概要</h2>

<p>
ゲームAIがゲームデザインを進化させたり、逆も起きる。<br>
アメリカではゲームAIが発展してるが、日本はまだまだ<br>
アメリカではＦＰＳが人気があり、ユーザーの目が肥えてきたので発展した<br>
日本はオリジナルのゲームが多いので、そこが狙い目
<p>

<hr>

<h2>■プランニング技術の紹介</h2>

</p>
知性とは？<br>
内部状態と環境との間の調整機関(インターフェイス)<br>
知性を持った者は、どうして行動しているか。<br>
　現在の状況を解析して動く->単純反射AI<br>
　　目標を見つけて、目標を立てて解析して行動<br>
　目標設定して行動する->ゴール指向AI<br>
　　一般のレベルでAIが目的を見つけることはできない->人間が設定（ゲームデザイナー）<br>
　　目標を達成するために行動するのがゴール指向<br>
　　ゴールを抽出するのが大切<br>
　AIが目標を達成するために細かく計画を練る。->プランニング<br>
　　目標を検索する人のことをプラナーと呼ぶ（内実はグラフ検索をする人）<br>
　　行動が階層化するのを階層化プランニングと呼ぶ<br>
　　コンピュータにプランニングをさせるには？<br>
　　　連鎖による方法（F.E.A.R.）<br>
　　　　前提条件＋振る舞い＋効果で記述して表現する<br>
　　　　ゴールからそれを効果として持つプランを見つけて、その前提条件から次の効果を連鎖的に見つけていく<br>
　　　　効果が同じならどのプランでもＯＫなので、多彩な振る舞いが可能<br>
　　　人手による方法（クロムハウンズ）<br>
　　　　連鎖を使わない。<br>
　　　　ある行動のときに、どの行動を呼び出すか記述しておく。<br>
　ゴール達成にプランニングを用いる->ゴール指向プランニング
</p>

<hr>

<h2>■F.E.A.R. の紹介</h2>

<p>
FPS(<a href="http://whatisfear.com/us/">公式サイト</a>,<a href="http://ja.wikipedia.org/wiki/F.E.A.R._%28%E3%82%B2%E3%83%BC%E3%83%A0%E3%82%BD%E3%83%95%E3%83%88%29">Wikipedia</a>)<br>
マップが複雑なのが特徴（屋内でも窓を飛び越えて行き来できたりする）<br>
ゲームAIのいろいろある分野の中でもゴール指向プランニングに特徴があると分類される。
</p>

<hr>

<h2>■F.E.A.R. のゴール指向アクションプランニング</h2>

<p>
同じ会社が作ったゲームからの発展はどうなってきたか。
</p>
<ul>
<li>SHOGO:単純反射
<li>NOLF2:ゴール指向FSM(有限要素機械)
<li>F.E.A.R.:ゴール指向プランニング
</ul>

<p>
F.E.A.R.の目指したAI
</p>
<ul>
<li>自分で感知し、自ら考えて行動する->ゴール指向エージェント<br>
<li>レベルデザインのオブジェクトを使う->知識表現、世界表現<br>
<li>以下にすべきか判断する->プランニング<br>
</ul>
<p>
ただし、これらは分離して考えることはできない。
</p>
<p>
ゴール指向型エージェントとは？<br>
　ゴールを決めて、その結果に応じた行動を行うAI
</p>
<p>
NOLF2との違い<br>
　知識表現が人間的な概念（F.E.A.R.は統一知識表現、シンボル）<br>
　　昔は、「所有権」とか概念的な情報を埋め込んだ<br>
　　今は、レイキャスト、パス探索などから情報を集めておき場所や信頼度、情報所得時間などの情報に統一化して溜め込む（統一知識表現）<br>
　　シンボルとは高速化のために、統一記述表現から、もっと単純な情報（どのノードにいるか）として世界を集約する。<br>
　ＦＳＭからプランニングへ<br>
　　昔は、ゴールを決めたらＦＳＭで行動を制御していた（ゴール単位で設定）<br>
　　今は、目的と行動は分離さていて、その途中をプラナーが（連鎖的に）つなぐ<br>
　　　レベルデザイナーがやっていた仕事をプラナーが勝手にやる
</p>
<p>
情報を取ってくるAI->エージェント<br>
プランニングの欠点は、プランに従わなくてはならない（状況が変わっても対応しない）。状況が変わったときにプランを立て直すことをリプランニングという<br>
いろいろなプランがあるときの選び方は？<br>
　行動に対してコストを考えてコストが一番小さな行動を選ぶ（A*）<br>
　これによって、キャラクタの個性として、異なるプランが生成される。
</p>

<hr>

<h2>■クロムハウンズのゴール指向アクションプランニング</h2>

<p>
特徴<br>
　戦略、戦術、行動のゴールを設定することができる。<br>
　スクリプトで行動を規定する<br>
　フィールド全域で行動<br>
　知識表現はナビゲーションメッシュによる簡略的な表現<br>
</p>
<p>
階層型ゴール指向プランニング<br>
　大きなゴールは小さなゴールから組み立てられる<br>
　最後はＡＩが実行できる簡単な行動に落とす<br>
　　戦略層、振舞い層、戦術層、戦略層<br>
　　下から作っていく<br>
　　ゲームテスト８０回<br>
</p>
<p>
長い時間にわたる制御が可能になった。<br>
短い時間に渡る状況の変化への対応も可能である。
</p>

<hr>

<h2>■Q&A</h2>

<p>
Q.クロムハウンズのデバッグ画面に出ている「寿命」って何？<br>
A.無限ループ防止用の保険<br>
Q.行動の粒度は？<br>
A.キャラクタごとに決まる。ユーザーからどう見えるか（おっ賢いな）を気にして行動を決めている。<br>
Q.BlackBoard は協調行動用？<br>
A.Yes.行動を皆に告知する。<br>
Q.なぜ、スクリプトを選んだ？<br>
A.必ずしもシンボル形式の簡単なところまで落とせるわけではなかった。柔軟性を持たせるため。階層型のときは有利だった。スクリプト書くのは最初は手間だが後で楽になっていく。
</p>

<hr>

<h2>■今後の発展</h2>

<p>
「実際にゲーム開発に応用するには」がテーマ。<br>
ある行動をつなげると、単純な構造から複雑なことができる。というのがゴール指向プランニング。<br>
以下のような応用が考えられる。
</p>
<ul>
<li>軍隊モデル（チームＡＩ）が可能。司令官->大隊->中隊->兵士
<li>群制御（人が集まって上空から見える文字を描く）
<li>チーム内の連携による攻撃
<li>街を舞台にしたＲＰＧ
<li>戦術シミュレーション
</ul>

<hr>

<h2>■Q&A</h2>

<p>
Q.企画とプログラマの場合わけは？<br>
A.企画->三宅->プログラマで橋渡し。三宅さんが階層を気にして設計。普通は技術者が分けるのが良いでしょう<br>
Q.スクリプトは企画でもかけるんじゃない？<br>
A.戦術、戦略は企画が書いても良いでしょう。できればその下でも企画が書いて良いと思います。<br>
Q.連鎖を追っていって、プランに達しないときは無いの？<br>
A.止まることが良くあった。しつこくデバッグした。特別なデバッグ技法を使ったわけではない。デバッグしきれないからといって、導入しないのは間違っていると思う。特別な技法を開発しなきゃいけないとは思っている。<br>
Q.階層型AIとFSMの違い？<br>
A.階層の中でＦＳＭが動いてるんじゃない？単にスケジューリングされたものが時間軸で線形に並べられているだけ。
</p>

<hr>


<h2>■グループ討論（グループ３）</h2>
<h3>参加者</h3>
<ul>
<li>某F社の企画さん(まとめ役)
<li>某F社のプログラマさん
<li>某□社の企画さん
<li>学生さん（来年から某テ○○社に入社予定）
<li>プランニングの専門家さん
<li>私
</ul>

<h3>ゲーム(ジャンル)の選択</h3>

<p>
ようするにネタ出し
</p>
<ul>
<li>ＦＰＳでfearを超える
<li>近接格闘系アクションゲーム
<li>ＲＰＧ？
<li>ストラテジ。カンパニーオブヒーローズがそんな感じ。物理エンジンで壁が壊れて道ができたり
<li>ＡＩからプレイヤーに提案してくる?
</ul>
<p>
と、紆余曲折ありまして…<br>
生活系ＳＬＧでいこう。<br>
人間関係シミュレーション。
</p>

<h3>プランニングの実現するCOM</h3>

<p>
このゲームのCOMとは？
</p>

<ul>
<li>ほかの生活者
<li>神様の場合もある？神様だと何でもできるというイメージがある。人間らしさで行こう。
</ul>

<p>
あいだにいろいろ脱線して…
</p>

<p>
生活者に何させたい？
</p>
<ul>
<li>友達を増やしたくなるようなゲーム性。
<li>空気を読む。
<li>プレイヤーを、ひそかにいじめていくとか。
<li>リプレイ機能があると良いんじゃない？（もしも別の選択肢を選んだら…）
<li>情報のまたぎきで直接伝えなくても伝わる。
<li>街の発展は？見えなくても良いんじゃない？見えたときの演出的効果もあるし。告白していた人が結婚していたとか変わっていると楽しい。
</ul>


<h3>プランニングの導入</h3>

<p>
どんなCOMが実現できそう？
</p>
<ul>
<li>どろどろした人間関係。
<li>サクラとか
</ul>


<h3>プランニングの実現するゲームデザイン</h3>


<p>
いままで無理だったことから何ができるようになるの？
</p>

<ul>
<li>作りこみだと、大きな影響があると元の道に戻れない。
<li>リプランニングで柔軟な行動をとらせられる。
<li>本当に想定外の事は対応できない。
<li>抽象的な最終ゴールが立てられる。（いい女とつきあう：今の女を育てるか分かれて他の女に行くか）
<li>スクリプトだと作りきれない。
</ul>

<h3>ゲームデザインの提案</h3>

<p>
このゲームをまとめて見ましょう。
</p>

<ul>
<li>何回も繰り返せる。別の人生を歩みなおせる。
<li>街を作って、遊んでもらう。
<li>目的は、自由に遊べるのと、ミッションがある。
<li>超人生ゲーム
</ul>

<p>
生まれたときから始まる？高校生ぐらい？
</p>

<ul>
<li>高校生追体験
<li>ＮＰＣが夢を持ってる。
<li>他のプレイヤーは参加できる？どっちでも良いのでは？
<li>高校だとうるさそうなので、学園生活シミュレーション
</ul>


<h3>企画会議シミュレーション</h3>

<p>
企画の出すイメージに対して、技術者が解決方法を提案するように実現性を考える。
</p>

<ul>
<li>プレイヤーも空気を読めるようにしないと。
<li>表情が重要そう。
<li>インターフェイスは？->感情アイコン。リアルタイムで？
</ul>


<h3>プランニングの実現のためには</h3>

<p>
実際に作る時に、何が問題になる？
</p>

<ul>
<li>パラメータが多くなるのでは？
<li>プランナーの仕事は、人格レベルの設定を行う。最終ゴールを設定する（複数ゴールを決めておいて、重みをつけておく）。
<li>どこまでやらせるか？恋愛は欠かせません。
<li>多分テンプレート化して、量産する。何人かの重要人物は作りこみ。
<li>内部パラメータはかっちり固定。
</ul>


<hr>

<h2>■さいごに</h2>

<p>
グループ討論は初めてだったので、
話についていくのがやっとで大変でした。
</p>


</div>
<BR CLEAR=ALL>
<BR CLEAR=ALL>
<BR CLEAR=ALL>
<center>
<hr>
<p><a href="../index.html">もどる</a></p>
<p><a href="mailto:imagire@gmail.com">imagire@gmail.com</a></p>
</center>

</body>
</html>
