<HTML>
<HEAD>
<TITLE>main.h</TITLE>
<meta name="GENERATOR" content="cpp2html 2.1 by Niisaka">
<meta http-equiv="Content-Type" content="text/html">
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFFF">
<PRE><FONT COLOR="#40F628">0001:</FONT> <FONT COLOR="#008000">//-------------------------------------------------------------</FONT>
<FONT COLOR="#40F628">0002:</FONT> <FONT COLOR="#008000">// File: main.h</FONT>
<FONT COLOR="#40F628">0003:</FONT> <FONT COLOR="#008000">//</FONT>
<FONT COLOR="#40F628">0004:</FONT> <FONT COLOR="#008000">// Desc: ハロ</FONT>
<FONT COLOR="#40F628">0005:</FONT> <FONT COLOR="#008000">//-------------------------------------------------------------</FONT>
<FONT COLOR="#40F628">0006:</FONT> <FONT COLOR="#0000FF">#pragma</FONT> once
<FONT COLOR="#40F628">0007:</FONT> 
<FONT COLOR="#40F628">0008:</FONT> 
<FONT COLOR="#40F628">0009:</FONT> 
<FONT COLOR="#40F628">0010:</FONT> <FONT COLOR="#008000">//-------------------------------------------------------------</FONT>
<FONT COLOR="#40F628">0011:</FONT> <FONT COLOR="#008000">// 定義や定数</FONT>
<FONT COLOR="#40F628">0012:</FONT> <FONT COLOR="#008000">//-------------------------------------------------------------</FONT>
<FONT COLOR="#40F628">0013:</FONT> <FONT COLOR="#008000">// 現在の入力データを保存する構造体</FONT>
<FONT COLOR="#40F628">0014:</FONT> <FONT COLOR="#0000FF">struct</FONT> UserInput
<FONT COLOR="#40F628">0015:</FONT> {
<FONT COLOR="#40F628">0016:</FONT>     BOOL bRotateUp;
<FONT COLOR="#40F628">0017:</FONT>     BOOL bRotateDown;
<FONT COLOR="#40F628">0018:</FONT>     BOOL bRotateLeft;
<FONT COLOR="#40F628">0019:</FONT>     BOOL bRotateRight;
<FONT COLOR="#40F628">0020:</FONT>     BOOL bZoomIn;
<FONT COLOR="#40F628">0021:</FONT>     BOOL bZoomOut;
<FONT COLOR="#40F628">0022:</FONT> };
<FONT COLOR="#40F628">0023:</FONT> 
<FONT COLOR="#40F628">0024:</FONT> 
<FONT COLOR="#40F628">0025:</FONT> 
<FONT COLOR="#40F628">0026:</FONT> 
<FONT COLOR="#40F628">0027:</FONT> <FONT COLOR="#008000">//-------------------------------------------------------------</FONT>
<FONT COLOR="#40F628">0028:</FONT> <FONT COLOR="#008000">// Name: class CMyD3DApplication</FONT>
<FONT COLOR="#40F628">0029:</FONT> <FONT COLOR="#008000">// Desc: アプリケーションのクラス</FONT>
<FONT COLOR="#40F628">0030:</FONT> <FONT COLOR="#008000">//-------------------------------------------------------------</FONT>
<FONT COLOR="#40F628">0031:</FONT> <FONT COLOR="#0000FF">class</FONT> CMyD3DApplication : <FONT COLOR="#0000FF">public</FONT> CD3DApplication
<FONT COLOR="#40F628">0032:</FONT> {
<FONT COLOR="#40F628">0033:</FONT>     <FONT COLOR="#0000FF">enum</FONT> {
<FONT COLOR="#40F628">0034:</FONT>         WEIGHT_MUN = 8,                     <FONT COLOR="#008000">// 重みを計算する個数</FONT>
<FONT COLOR="#40F628">0035:</FONT>     };
<FONT COLOR="#40F628">0036:</FONT>     D3DXVECTOR4             m_tbl[2][WEIGHT_MUN];<FONT COLOR="#008000">// 重みの配列</FONT>
<FONT COLOR="#40F628">0037:</FONT>     VOID                    UpdateWeight();<FONT COLOR="#008000">// 重みの配列の計算</FONT>
<FONT COLOR="#40F628">0038:</FONT>     
<FONT COLOR="#40F628">0039:</FONT>     CD3DMesh                *m_pMesh;
<FONT COLOR="#40F628">0040:</FONT>             
<FONT COLOR="#40F628">0041:</FONT>     <FONT COLOR="#008000">// シェーダ</FONT>
<FONT COLOR="#40F628">0042:</FONT>     LPD3DXEFFECT            m_pEffect;      <FONT COLOR="#008000">// エフェクト</FONT>
<FONT COLOR="#40F628">0043:</FONT>     D3DXHANDLE              m_hTechnique;   <FONT COLOR="#008000">// テクニック</FONT>
<FONT COLOR="#40F628">0044:</FONT>     D3DXHANDLE              m_hafWeight;    <FONT COLOR="#008000">// 重みの配列</FONT>
<FONT COLOR="#40F628">0045:</FONT>     D3DXHANDLE              m_htSrcMap;     <FONT COLOR="#008000">// テクスチャ</FONT>
<FONT COLOR="#40F628">0046:</FONT>     D3DXHANDLE              m_htSrcMap2;    <FONT COLOR="#008000">// テクスチャ</FONT>
<FONT COLOR="#40F628">0047:</FONT>     D3DXHANDLE              m_hmWVP;        <FONT COLOR="#008000">// ローカル-射影変換行列</FONT>
<FONT COLOR="#40F628">0048:</FONT>     D3DXHANDLE              m_hvLightDir;   <FONT COLOR="#008000">// ライトの方向</FONT>
<FONT COLOR="#40F628">0049:</FONT>     D3DXHANDLE              m_hvEyePos;     <FONT COLOR="#008000">// 視点</FONT>
<FONT COLOR="#40F628">0050:</FONT>     D3DXHANDLE              m_hvCol;        <FONT COLOR="#008000">// 頂点色</FONT>
<FONT COLOR="#40F628">0051:</FONT>     LPDIRECT3DVERTEXDECLARATION9    m_pDecl;    <FONT COLOR="#008000">// 頂点宣言</FONT>
<FONT COLOR="#40F628">0052:</FONT> 
<FONT COLOR="#40F628">0053:</FONT>     <FONT COLOR="#008000">// シャドウマップ</FONT>
<FONT COLOR="#40F628">0054:</FONT>     LPDIRECT3DSURFACE9      m_pMapZ;        <FONT COLOR="#008000">// 深度バッファ</FONT>
<FONT COLOR="#40F628">0055:</FONT>     LPDIRECT3DTEXTURE9      m_pOriginalTex; <FONT COLOR="#008000">// テクスチャ</FONT>
<FONT COLOR="#40F628">0056:</FONT>     LPDIRECT3DSURFACE9      m_pOriginalSurf;<FONT COLOR="#008000">// サーフェス</FONT>
<FONT COLOR="#40F628">0057:</FONT>     LPDIRECT3DTEXTURE9      m_pLumTex;      <FONT COLOR="#008000">// テクスチャ</FONT>
<FONT COLOR="#40F628">0058:</FONT>     LPDIRECT3DSURFACE9      m_pLumSurf;     <FONT COLOR="#008000">// サーフェス</FONT>
<FONT COLOR="#40F628">0059:</FONT>     LPDIRECT3DTEXTURE9      m_pXMap;        <FONT COLOR="#008000">// テクスチャ</FONT>
<FONT COLOR="#40F628">0060:</FONT>     LPDIRECT3DSURFACE9      m_pXMapSurf;    <FONT COLOR="#008000">// サーフェス</FONT>
<FONT COLOR="#40F628">0061:</FONT>     LPDIRECT3DTEXTURE9      m_pLargeTex;    <FONT COLOR="#008000">// テクスチャ</FONT>
<FONT COLOR="#40F628">0062:</FONT>     LPDIRECT3DSURFACE9      m_pLargeSurf;   <FONT COLOR="#008000">// サーフェス</FONT>
<FONT COLOR="#40F628">0063:</FONT>     LPDIRECT3DTEXTURE9      m_pSmallTex;    <FONT COLOR="#008000">// テクスチャ</FONT>
<FONT COLOR="#40F628">0064:</FONT>     LPDIRECT3DSURFACE9      m_pSmallSurf;   <FONT COLOR="#008000">// サーフェス</FONT>
<FONT COLOR="#40F628">0065:</FONT> 
<FONT COLOR="#40F628">0066:</FONT>     <FONT COLOR="#008000">// 通常の座標変換行列</FONT>
<FONT COLOR="#40F628">0067:</FONT>     D3DXMATRIX              m_mWorld;
<FONT COLOR="#40F628">0068:</FONT>     D3DXMATRIX              m_mView;
<FONT COLOR="#40F628">0069:</FONT>     D3DXMATRIX              m_mProj;
<FONT COLOR="#40F628">0070:</FONT> 
<FONT COLOR="#40F628">0071:</FONT>     BOOL                    m_bLoadingApp;  <FONT COLOR="#008000">// ロード中？</FONT>
<FONT COLOR="#40F628">0072:</FONT>     CD3DFont*               m_pFont;        <FONT COLOR="#008000">// フォント</FONT>
<FONT COLOR="#40F628">0073:</FONT>     UserInput               m_UserInput;    <FONT COLOR="#008000">// 入力データ</FONT>
<FONT COLOR="#40F628">0074:</FONT> 
<FONT COLOR="#40F628">0075:</FONT>     FLOAT                   m_fWorldRotX;   <FONT COLOR="#008000">// Ｘ軸回転</FONT>
<FONT COLOR="#40F628">0076:</FONT>     FLOAT                   m_fWorldRotY;   <FONT COLOR="#008000">// Ｙ軸回転</FONT>
<FONT COLOR="#40F628">0077:</FONT>     FLOAT                   m_fViewZoom;    <FONT COLOR="#008000">// 視点の距離</FONT>
<FONT COLOR="#40F628">0078:</FONT> 
<FONT COLOR="#40F628">0079:</FONT> <FONT COLOR="#0000FF">protected</FONT>:
<FONT COLOR="#40F628">0080:</FONT>     <FONT COLOR="#0000FF">virtual</FONT> HRESULT OneTimeSceneInit();
<FONT COLOR="#40F628">0081:</FONT>     <FONT COLOR="#0000FF">virtual</FONT> HRESULT InitDeviceObjects();
<FONT COLOR="#40F628">0082:</FONT>     <FONT COLOR="#0000FF">virtual</FONT> HRESULT RestoreDeviceObjects();
<FONT COLOR="#40F628">0083:</FONT>     <FONT COLOR="#0000FF">virtual</FONT> HRESULT InvalidateDeviceObjects();
<FONT COLOR="#40F628">0084:</FONT>     <FONT COLOR="#0000FF">virtual</FONT> HRESULT DeleteDeviceObjects();
<FONT COLOR="#40F628">0085:</FONT>     <FONT COLOR="#0000FF">virtual</FONT> HRESULT Render();
<FONT COLOR="#40F628">0086:</FONT>     <FONT COLOR="#0000FF">virtual</FONT> HRESULT FrameMove();
<FONT COLOR="#40F628">0087:</FONT>     <FONT COLOR="#0000FF">virtual</FONT> HRESULT FinalCleanup();
<FONT COLOR="#40F628">0088:</FONT>     <FONT COLOR="#0000FF">virtual</FONT> HRESULT ConfirmDevice( D3DCAPS9*, DWORD, D3DFORMAT );
<FONT COLOR="#40F628">0089:</FONT> 
<FONT COLOR="#40F628">0090:</FONT>     HRESULT RenderText();
<FONT COLOR="#40F628">0091:</FONT> 
<FONT COLOR="#40F628">0092:</FONT>     <FONT COLOR="#0000FF">void</FONT>    UpdateInput( UserInput* pUserInput );
<FONT COLOR="#40F628">0093:</FONT> <FONT COLOR="#0000FF">public</FONT>:
<FONT COLOR="#40F628">0094:</FONT>     LRESULT MsgProc( HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam );
<FONT COLOR="#40F628">0095:</FONT>     CMyD3DApplication();
<FONT COLOR="#40F628">0096:</FONT>     <FONT COLOR="#0000FF">virtual</FONT> ~CMyD3DApplication();
<FONT COLOR="#40F628">0097:</FONT> };
<FONT COLOR="#40F628">0098:</FONT> 
<FONT COLOR="#40F628">0099:</FONT> </PRE>
</BODY>
</HTML>
