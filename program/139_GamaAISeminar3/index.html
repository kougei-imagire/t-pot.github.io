<head>
	<title>t-pot『Chrome Hounds におけるチームAI』</title>
	<link rel="stylesheet" type="text/css" href="../if.css">
</head>
<meta http-equiv=Content-Type content="text/html; charset=shift_jis">
<body>


<div class="contents">
<center>
<BR CLEAR=ALL>
<BR CLEAR=ALL>
<h1>Chrome Hounds におけるチームAI</h1><br>
<h3>〜 「ゲームAI連続セミナー第3回」レポート 〜</h3>
<BR CLEAR=ALL>
<BR CLEAR=ALL>
<BR CLEAR=ALL>
<!--<image src = "title.png">-->
<br>
<hr>
</center>
<div>


<h2>■はじめに</h2>


<p>
<a href="http://www6.plala.or.jp/mnagaku/">長久さん</a>や三宅さんがやっている<a href="http://www.igda.jp/modules/news/article.php?storyid=1133">「ゲームAI連続セミナー」 の第３回</a>に行ってみました。
今回のテーマは、チームAIです。<br>
今回も三宅さんとグループワークの２部構成です。
</p>

<p>
基本的にセミナー中にメモったものを起こし直したので、
聞き漏らしたり、勘違いしているところがあると思います。すいません。
</p>

<hr>

<h2>■最初</h2>

<p>
最初に、定番のゲームAIセミナーの概要紹介。<br>
しゃべる人募集中。
</p>

<p>
反省点、改善点。<br>
　議論が抽象過ぎた->マリオを題材にしてみた<br>
　資料を事前に配布
</p>


<hr>

<h2>■集団における知性</h2>

<p>
全体として知性を持つ<br>
人工知能の流行の分野であるが、ゲームではユーザーに感じさせるのが大事<br>
プレイヤーを楽しませるAI<br>
それぞれの人に大切なこと<br>
　プログラマ：以下にして知性を持たせるか<br>
　企画；いかにしてユーザーに知らせるか<br>
</p>
<p>
集団の知性＝個々の知識＋連携<br>
仕掛けを作って、シミュレーションして結果が「全体の新しい機能」になってればOK<br>
試行錯誤する必要がある。
</p>
<p>
２つのアプローチ<br>
　群知能<br>
　　単純な機能しかないAIを連携<br>
　マルチエージェント<br>
　　高度な知識を持つAIをコミュニケーションをとらせて連携させる<br>
　　賢い。役割を認識する<br>
　境目は難しい。群知能は自然の模倣、マルチエージェントは社会の模倣に使われる
</p>

<hr>

<h2>■群知能</h2>

<p>
亀ががけの上に残されたとき、どうやって助けられるか？<br>
　○巨大ロボ？<br>
　○空を飛ぶ？<br>
　●小さなロボットを使って連携<br>
　　ブロックを作る<br>
　　ブロックを運ぶ<br>
　　ブロックを積む<br>
　３つめのような単純なものを組み合わせるのが群機能
</p>
<p>
ex.<br>
　自動計測ロボット<br>
　自然全体（蜂の社会：働き蜂＋女王蜂）<br>
<br>
　シミュレーションが盛んな分野
</p>

<hr>

<h2>■マルチエージェント</h2>

<p>
ロボットチームを作ってワールドカップで優勝したチームに勝つには<br>
　○群知能：それぞれが反射的に行動<br>
　○FSM:用意した状況に応じて行動<br>
　●人間の役割を模倣<br>
　　フォワード<br>
　　キーパー<br>
　　ミッドフィールダー<br>
　各AIに高度な知識が必要
</p>
<p>
ex.<br>
　ロボカップサッカー<br>
　　シミュレーションリーグ（コンピュータ上で再現）<br>
　　本当のロボット<br>
　　　車、４足歩行（アイボ）、２足歩行<br>
　　具体的な技術例：フォーメーションプレイ<br>
　　　フォーメーションできる条件を持ち<br>
　　　トリガが立ったら、最適なプレイヤーを選ぶ<br>
　チンパンジーの群れ（リアル猿）<br>
　　偵察、先陣、見張り、しんがりの役割をつけて道路を安全にわたる<br>
　ザトウクジラの群れ<br>
　　連携して魚をとる<br>
　　声を出して連携<br>
　交通シミュレーター<br>
　　相互回避システム<br>
　　　自分が通る道を知らせておいて、他の車に避けてもらう
</p>

<h3>Q&A</h3>

<p>
Q. 亀の例はマルチエージェントと違うの？<br>
A. そういう人もいないことはない。行動が反射的なので、役割を認識しているわけではない。<br>
Q. 交通シミュレータは群知能でない？<br>
A. 反射なら半径？ｍとかで処理するが、メッセージを送っているのが知性的<br>
Q. ストーカーってゲームがあって、それは生態系をシミュレートしているらしいが<br>
A. しらない<br>
Q. 鯨の例は役割が同じなので、群知能ではないのでは？<br>
A. タイミングを合わせるのは役割分担では？<br>
Q. 鳥の群れの軌跡は集団の合意で決まっている？先頭についていく？<br>
A. 例で出したのは、自然とは違う
</p>

<hr>

<h2>■集団の知能のゲームへの応用</h2>

<p>
タイトルに組み込まれた例<br>
あまり多くない<br>
なぜ？<br>
　一体のAIなら何とか作りこめる。集団はごまかせない<br>
　どの技術を使ってよいか分からない（まとまりがない）<br>
　調整方法が分からないので不安（ノウハウが少ない）<br>
可能性はあるので、これからのフロンティア<br>
</p>
<p>
何をもたらすか？<br>
　群知能：リアリティ<br>
　マルチージェント：敵、見方、プレイヤーに近い位置でチームを組める<br>
　（キャラクタに登場させやすい）
</p>
<p>
群知能の応用：<br>
　群制御：クローズアップされすぎているくらい（ビジュアルに訴える）<br>
　　鳥の運動の制御（ボイド）<br>
　　自然界の生物の動きをシミュレート<br>
　進化：用例があまり無い<br>
　　アウトロノーカ<br>
　　遺伝的アルゴリズム<br>
　知性：群知能を生み出す立場にプレイヤーを置く<br>
　　レミングス：回数制限のある命令<br>
　　　実際は群知能ではない（自分たちで協調しているわけではない）<br>
　　ピクミン：<br>
　　　これも違う（ピクミン同士の連携が無い）<br>
　　ブラックアンドホワイト<br>
　　　AIは自立的に行動。障害を取り除くのがプレイヤーの仕事<br>
<br>
　　戦略シミュレーションで勝手にやってくれるのも考えられるがゲーム性と衝突<br>
　　　プレイヤーの見ていないところで何かされているのは困る<br>
　　クロムハウンズでも勝手にクリアされるのは困るというのが出た。<br>
　　自分たちで判断できるが、能力を抑えておいて、プレイヤーが指示してから本気を出す
</p>

<h3>Q&A</h3>

<p>
Q. ピクミンは群制御はしているのでは。<br>
A. Yes. 群の知性が無いということ
</p>



<hr>

<h2>■クロムハウンズ（プラチナ版が出て、安く手に入るよ）</h2>

<p>
プレイヤーと戦うCOMのチーム<br>
マルチエージェント<br>
記憶、意思決定、行動のそれぞれに協調が必要<br>
プレイヤーの協調と対等に戦う（のが目標）<br>
技術ありきではなくて、プレイヤーができていることをすべてやれるようにしよう<br>
　プログラマ、企画と検討（デバッガの意見も）
</p>
<p>
個々のAI（第２回の資料を見てね）<br>
　プランニング（目的に対して行動を積み上げる）<br>
　ゴール思考（何をするか自分で判断する）<br>
　階層化して、小さなゴールを積み重ねる<br>
　コンセプト：人間の知性を真似する<br>
　　人間：複数の要求を持って、そのなかで最適な行動を選択<br>
　　AI:複数のゴールを持って、最適なゴールを選択する<br>
　→意思決定機構を追加（評価関数）<br>
　　見返りとリスクを考えて意思決定<br>
　　自律型エージェント（個としてのAI）が完成する
</p>
<p>
連携
　チームAIを入れないと、個別撃破されて帰ってくる<br>
　見方を救援することを入れる<br>
　　足が遅いやつは、やられやすいので護衛をつける<br>
　　体力が無いやつを助けに行く。<br>
　　　おとりに使われる可能性もあるので、あまりにも遠かったらいかない<br>
　なかなか人間にかてない<br>
　　人間は、多対一で戦っている。<br>
　　出会った時に戦力を分析して、敵が1.4倍強そうなら退却（群知能的アプローチ）<br>
　　もっとも弱い敵を集中的に攻撃<br>
　まだ勝てない<br>
　　ゲームの流れを読む（時間的戦略）<br>
　　　終盤に勝利条件を見越した行動をとってくる<br>
　　　組織の葛藤を取り込む（組織の利益と個人の利益は一致しない）<br>
　　　　対立関係にある<br>
　　　　　組織としての合理性<br>
　　　　　個人としての合理性<br>
　　　　敵をたたくときは多対一<br>
　　　　ゲーム後半では目標をあわせる<br>
　　　　勝負をかけるタイミングを合わせる<br>
　　　チームAI（全体を見渡して意思決定する人）を作る<br>
　　　　チームとしての戦略<br>
　　　　ただし、この判断はあるときは正しくてあるときは間違っている<br>
　　　　　評価関数で実際の行動を決定<br>
　これでも勝てない<br>
　　人間の終盤の決断力がすごい<br>
　　チームに対する評価値は後半になるほど影響力が強い<br>
　　プレイヤーから、ゲームメーキングをしているように見える<br>
　柔軟な計画性（複数のプランを考える）ができてない。<br>
　言わなくても分かるがまだできていない。
</p>

<h3>Q&A</h3>

<p>
Q.初心者の相手になった？<br>
A.yes. 人間を圧倒するのは作れない。人間は学習できる（初心者の学習曲線の制御）。<br>
Q.パラメータを調整するのに工夫した？<br>
A.デバッガさんがたくさん確保できてたので、意見をもらっていた（企画の宮崎）。
</p>

<h3>休憩時間に聞いたこと</h3>

<p>
Q.チームAIと個人の意思決定の評価関数による選択は、実際の世界に成り立つの？人工知能？社会学的に正しいの？<br>
A.そういうことをやっている人はいる。実装したときは知らなかった。チームAIを完璧に作りこむことができなかったので、自分との判断とで選択させるようにした。無能な上司（三宅さんはこの言葉を使ってません）のときは、自分で判断して行動するのは一般に成り立つのかも。部下が上司を評価する仕組みを入れていくのはAIとしても面白いかも。
</p>

<hr>

<h2>■集団の知能のつくり方</h2>

<p>
知性<br>
　条件反射<br>
　エージェントで作るのがありある<br>
知識<br>
　知識交換型<br>
　黒板モデルがありうる<br>
行動<br>
　階層型<br>
　分散型<br>
　管理型（チームAI）<br>
コミュニケーション<br>
　互いに通信<br>
　チームAIから指示<br>
　黒板<br>
行動の同期<br>
　反射型は特に考えなくて良い<br>
　結果共有（他の人が成功したら実行）<br>
　エージェントがマルチエージェントを制御<br>
<br>
グループワークでリアリティのあるNPCのチームを作ってね
</p>

<hr>

<h2>■グループワーク</h2>

<h3>テーマ: Super Mario Brothers</h3>

<p>
今、作っているゲームでのSMBで作られている工夫があるはず<br>
60分で、ひとつの意見を纏め上げよう（成果物を作る）。
</p>

<h3>参加者（２番テーブル（全9テーブル））</h3>
<ul>
<li>某S社の企画さん(まとめ役)<!-- SCEの後藤さん -->
<li>??社(会社わすれた)のプログラマさん<!-- 伊藤さん -->
<li>某KO3年の学生さん（モバイル系のバイトしてる）<!-- 黒川さん -->
<li>某A社の企画（レベルデザイン）さん<!-- アートディンクの永田 -->
<li>某M社のプログラマさん<!-- メディアビジョンの？？さん -->
<li>某T社の新人プログラマさん<!-- テクもの塩田さん -->
<li>某S社のプログラマさん<!-- SCEの千原さん -->
<li>私
</ul>


<h3>どの技術をどのように入れていけばよい？</h3>

<p>
意見だし（上のならび順でそれぞれの意見（実際の発言順ではない））<br>
□フォーメーション。地形の利用。乗っかろうとするところに敵がいる。パタパタのあたりに集まって迎え撃つ。土管の後ろを狙うとか。マリオの状態を見て、死なないようにふるまう（ファイアになったら誰かが犠牲になって攻撃）<br>
□SMB AIいじっても面白くない：キャラが一緒に行動しない。群集管理で強くなるのでは？とりあえず強いやつが先に攻撃すればよい。<br>
□遺伝的アルゴリズム（マリオに向かうけど、とまってみたら？）。勝ちパターンの学習<br>
□階層型AI（親分の指示した行動をとる）。親分は動かない。親分が死んだら元のに戻る。<br>
□パックンフラワーは移動できない援護役。クリボーがやられそうなタイミングで火を吐く。<br>
□火を吐くのは方向を決めているが連携して弾幕を吐く。集中管理型。<br>
□ノコノコが上、パタパタが下とかフォーメーション。<br>
□きのこの下とか行きやすい場所があるので、メリハリをつけていっせいに襲い掛かる
</p>

<p>
地形だと、レベルデザイン。動的な方が面白いのでは？<br>
いや、地形でも自動デザインという点では面白い。<br>
フォーメーションはどんなメンバー？<br>
　数に物言わすとか<br>
　時系列を考える<br>
　まずははめ方を考えて、地形を考えて組むのかなぁ。司令官が考える。階層化するんでしょう。<br>
数に物を言わせるのあり？ルールがあってまとめるのが正しいのでは？<br>
　何か制限をつけていかないと面白くないでしょう。<br>
■１面の密度で、考えるのはいかが？１対２０ぐらい。<br>
遺伝的は１つの面で？<br>
　面が進めば難しくなる。<br>
遊び方によって難易度が変わる？<br>
ユーザーが気づけるかが大事では？
</p>

<h3>具体的にSMBを考えて</h3>

<p>
数に制限があるとするとフォーメーション？
</p>
<p>
敵って、一度画面外に出たらもう出なくなるんだっけ？<br>
違う、戻ってくる。<br>
パックンフラワーが踏んでるとき出てこない制限もなしでは？
</p>
<p>
どんなフォーメーションが組める？<br>
強いのは、多分パタパタ。<br>
マリオの状態を見るとか考えられると思う。
</p>
<p>
役割が大事になってくると考えられる。<br>
偵察<br>
おとり<br>
鉄砲玉<br>
しんがり？<br>
ノコノコがひっくり帰ったときに助けに行く？<br>
ノコノコが自分でひっくり返って攻撃。<br>
クリボーは方向転換がありでは<br>
ぱたぱたをどう援護するか？<br>
壁が行動範囲。<br>
フォーメーションは、１つのマップの中に何個かで良いよね。OK.<br>
勝てないと思ったら、逃げる。<br>
ノコノコがひっくり返ったら逃げる。<br>
SMBって、ノコノコどうだっけ？<br>
　踏めばひっくり返って、横からあたると飛んでいく。<br>
　ノコノコ：エリート<br>
　クリボー：ザコ<br>
　みんな横が強くて上から弱い
</p>
<p>
パタパタの下にユニット<br>
フラワー：炎で援護射撃<br>
パタパタ：上から<br>
ノコノコ：<br>
クリボー：<br>
</p>
<p>
地形を考えて、いかないとだめそう？<br>
地形情報から、フォーメーションを決める？<br>
　見方の有利かどうかを判断して組む、行動させる。<br>
チームAIが地形を判断して配置？<br>
毎回プレイで変化があると面白い<br>
個別っぽい感じがする。<br>
　役割と組み合わせになりがち。<br>
うまくやっていれば組んでやっているように見せられるのでは？<br>
集まっていってやらないといけない。<br>
地形の評価係数をつけて、攻撃か待つかを考えれられる。<br>
　結局フォーメーションでは無い。<br>
それっぽく見えればよい。<br>
</p>
<p>
ディレイをかける（タイミングをずらして落ちてくる）<br>
　おなじようなことをしようとするやつはずらす。<br>
マリオの行動を見るのあり？<br>
　ジャンプしてからの行動で判断。<br>
ジャンプの行動の対応は遺伝的にやるのはありかも。<br>
違う役割の組み合わせが価値があるのでは？<br>
</p>

<h3>何を考えればよい？どう連携をとればよい？</h3>

<p>
フラワーの援護射撃にあわせて何か考えるのがいけそう？<br>
　接近してジャンプしたときに出てくる。<br>
　囮としてジャンプさせたくなるのを配置するのがあり？<br>
　土管の裏にノコノコを置いといて、意識を集中させていきなり出てくる。<br>
　フラワー強いね。ファイヤの時は引っ込む。<br>
　「クリボーは踏むか」という意識が強い。囮役ならクリボーかな。<br>
　クリボーが近くにいたら察知してファイアを出しておく。
</p>
<p>
パタパタの活用法（上から踏む、ファイア、逃げるしか手が無い）<br>
　マリオの頭の上に置いたら最強（ジャンプできない）。<br>
　そこに他のやつを寄らせる。<br>
　最初は上にして、だんだん下に出てくる。<br>
　逃げるためにスピードだしがちになるから、ノコノコで緩急つける。<br>
　飛びにくいから、下に何かつける。<br>
　仲間の上にいるのも手かも。
</p>
<p>
ノコノコ<br>
　基本、クリボーの後ろ<br>
　土管の手前にあるのは有利。<br>
　土管の近くで待つ？<br>
　　そういえば、マリオのキャラで、待つのって無いね。<br>
　　　強くなるからやらないのでは？<br>
　　　とまっていると色々な情報が手に入ってくる。<br>
　ひっくり返るとどうしようもない。<br>
　とりあえず蹴りたくなるので、誘導に使える。
</p>
<p>
クリボー<br>
　意外と最初のクリボーでうっかりする<br>
　気の緩みを誘う<br>
　逃げて有利な場所に行く<br>
　団体で来ると１UPの餌食になる<br>
　横移動が自由になるが強くなる。<br>
　　出ないと出現させるタイミングだけ。<br>
　　心理的な駆け引きを狙える<br>
　　出し方もチームAIで制御させるのでは。
</p>

<h3>チームの構造</h3>

<p>
分散型で考える？<br>
チームAIを使うとしたら、<br>
　配置<br>
　マリオの振る舞いを見てどう攻めるか指示<br>
結論：チームAI
</p>

<h3>伝えあう行動</h3>

<p>
死んだ情報<br>
ファイアーマリオの情報は？何ができる？<br>
ファイアーだと、パタパタやパックンが死に安いのでほかのが行く<br>
ノコノコがひっくり返ったときにマリオが近くにいあるか<br>
地形の評価点？キャラの行動を考えてチームAIが指示
</p>

<h3>コミュニケーションの仕方</h3>

<p>
下から上。自分の情報を伝える。<br>
マリオの動きは誰が伝える？<br>
チームAIが指示する。（ファイアになりそうになる前に攻撃）
</p>

<h3>問題点ある？</h3>

<p>
AI使っているように見えない？<br>
ただ単に配置ジャン！<br>
地形が変わったときに配置が換わる。<br>
チームAIが大変だよね？<br>
　配置の問題にしか落ち着かない？<br>
結局難易度を決めているのは地形<br>
手加減加えないと最適解に落ち込む<br>
　結局配置に持ち込まれる？<br>
面白く感じられそうか？<br>
　結局配置ジャン！<br>
　個別の反射で何とかなってないかとかなりそう。<br>
やるたびに変われば？<br>
ガントレットがランダム性で変化をつけてる。<br>
自由度の少ないゲームは重要でない？<br>
コストに対するリターンが悪い<br>
あえてメッセージ出すとか<br>
　みんな逃げろ！<br>
　クリボーお前が行け！俺は行きたくない<br>
　パックンが土管の中で「まだこないかなー」<br>
むしろそっちが面白い？<br>
罪悪感を感じそう。
</p>

<hr>

<h2>■他のグループ</h2>

<h3>１番テーブル</h3>
<p>
割と瞑想<br>
狭い世界なので、ここのキャラに独自性があっても…<br>
「マルチエージェントは上手くいかない」から始まった。<br>
チームAIでいろいろ工夫するのが面白そう？<br>
どういじられたら見当がつかない。<br>
群知能系で、削っていったら資料で出ているものになってった
</p>

<h3>５番テーブル</h3>

<p>
敵の性能が低い<br>
集団で襲い掛かる<br>
ファイアにならないように反射的に動かす<br>
　はてなブロックに集まるとか<br>
チームAIではいきつまる<br>
　３人チームでタッグを組む（黒板やマルチエージェント）<br>
　先頭がジャンプを誘う役。マリオの着地点が無防備になる。よけたときに突っ込む。
</p>

<h3>６番テーブル</h3>

<p>
最小限の労力で最大限の効果<br>
　反射型<br>
　黒板モデル（マリオの位置、着地予想地点）<br>
　マリオの様子を見て全体で行動<br>
　パックマンのモンスター的<br>
　連続して踏まれないようにする。<br>
　あな、パックンフラワー、？の周りがキーポイントなので、その周りを見る<br>
　強いやつから弱いやつまで優先度をつけて、順番に出す。
</p>

<h3>９番テーブル</h3>
<p>
マルチエージェント<br>
マリオの位置、仲間の位置を考えてポジショニング<br>
　裏にあるのは、順番に並ぶと上手そうだが、最後に穴に落とさせてはめる<br>
シナリオを作る的<br>
地形情報と周りの情報から自分の行動を考える<br>
やられた情報をチームAIに集めといて、アンチパターンをためる
</p>

<hr>

<h2>■さいごに</h2>

<p>
グループワークは少しなれた感じ。<br>
でも、脊髄反射で分けわかんないこといってしまうときがあるなぁ…
</p>


</div>
<BR CLEAR=ALL>
<BR CLEAR=ALL>
<BR CLEAR=ALL>
<center>
<hr>
<p><a href="../index.html">もどる</a></p>
<p><a href="mailto:imagire@gmail.com">imagire@gmail.com</a></p>
</center>

</body>
</html>
