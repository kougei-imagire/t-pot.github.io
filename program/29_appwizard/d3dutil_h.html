<HTML>
<HEAD>
<TITLE>d3dutil.h</TITLE>
<meta name="GENERATOR" content="cpp2html 2.0 by Niisaka">
<meta http-equiv="Content-Type" content="text/html">
<meta http-equiv="Content-Style-Type" content="text/css">
<STYLE TYPE="text/css">
<!--
SPAN.comment { color:#008000; font-weight:normal; font-style:normal;}
SPAN.keyword { color:#0000FF; font-weight:normal; font-style:normal;}
SPAN.string { color:#600000; font-weight:normal; font-style:normal;}
SPAN.linenum { color:#A0A0A0; font-weight:normal; font-style:normal;}
-->
</STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFFF">
<PRE><SPAN CLASS="linenum">0001:</SPAN> <SPAN CLASS="comment">//-----------------------------------------------------------------------------</SPAN>
<SPAN CLASS="linenum">0002:</SPAN> <SPAN CLASS="comment">// File: D3DUtil.h</SPAN>
<SPAN CLASS="linenum">0003:</SPAN> <SPAN CLASS="comment">//</SPAN>
<SPAN CLASS="linenum">0004:</SPAN> <SPAN CLASS="comment">// Desc: Helper functions and typing shortcuts for Direct3D programming.</SPAN>
<SPAN CLASS="linenum">0005:</SPAN> <SPAN CLASS="comment">//-----------------------------------------------------------------------------</SPAN>
<SPAN CLASS="linenum">0006:</SPAN> <SPAN CLASS="keyword">#ifndef</SPAN> D3DUTIL_H
<SPAN CLASS="linenum">0007:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DUTIL_H
<SPAN CLASS="linenum">0008:</SPAN> <SPAN CLASS="keyword">#include</SPAN> &lt;D3D8.h&gt;
<SPAN CLASS="linenum">0009:</SPAN> <SPAN CLASS="keyword">#include</SPAN> &lt;D3DX8Math.h&gt;
<SPAN CLASS="linenum">0010:</SPAN> 
<SPAN CLASS="linenum">0011:</SPAN> 
<SPAN CLASS="linenum">0012:</SPAN> 
<SPAN CLASS="linenum">0013:</SPAN> 
<SPAN CLASS="linenum">0014:</SPAN> <SPAN CLASS="comment">//-----------------------------------------------------------------------------</SPAN>
<SPAN CLASS="linenum">0015:</SPAN> <SPAN CLASS="comment">// Name: D3DUtil_InitMaterial()</SPAN>
<SPAN CLASS="linenum">0016:</SPAN> <SPAN CLASS="comment">// Desc: Initializes a D3DMATERIAL8 structure, setting the diffuse and ambient</SPAN>
<SPAN CLASS="linenum">0017:</SPAN> <SPAN CLASS="comment">//       colors. It does not set emissive or specular colors.</SPAN>
<SPAN CLASS="linenum">0018:</SPAN> <SPAN CLASS="comment">//-----------------------------------------------------------------------------</SPAN>
<SPAN CLASS="linenum">0019:</SPAN> VOID D3DUtil_InitMaterial( D3DMATERIAL8&amp; mtrl, FLOAT r=0.0f, FLOAT g=0.0f,
<SPAN CLASS="linenum">0020:</SPAN>                                                FLOAT b=0.0f, FLOAT a=1.0f );
<SPAN CLASS="linenum">0021:</SPAN> 
<SPAN CLASS="linenum">0022:</SPAN> 
<SPAN CLASS="linenum">0023:</SPAN> 
<SPAN CLASS="linenum">0024:</SPAN> 
<SPAN CLASS="linenum">0025:</SPAN> <SPAN CLASS="comment">//-----------------------------------------------------------------------------</SPAN>
<SPAN CLASS="linenum">0026:</SPAN> <SPAN CLASS="comment">// Name: D3DUtil_InitLight()</SPAN>
<SPAN CLASS="linenum">0027:</SPAN> <SPAN CLASS="comment">// Desc: Initializes a D3DLIGHT structure, setting the light position. The</SPAN>
<SPAN CLASS="linenum">0028:</SPAN> <SPAN CLASS="comment">//       diffuse color is set to white, specular and ambient left as black.</SPAN>
<SPAN CLASS="linenum">0029:</SPAN> <SPAN CLASS="comment">//-----------------------------------------------------------------------------</SPAN>
<SPAN CLASS="linenum">0030:</SPAN> VOID D3DUtil_InitLight( D3DLIGHT8&amp; light, D3DLIGHTTYPE ltType,
<SPAN CLASS="linenum">0031:</SPAN>                         FLOAT x=0.0f, FLOAT y=0.0f, FLOAT z=0.0f );
<SPAN CLASS="linenum">0032:</SPAN> 
<SPAN CLASS="linenum">0033:</SPAN> 
<SPAN CLASS="linenum">0034:</SPAN> 
<SPAN CLASS="linenum">0035:</SPAN> 
<SPAN CLASS="linenum">0036:</SPAN> <SPAN CLASS="comment">//-----------------------------------------------------------------------------</SPAN>
<SPAN CLASS="linenum">0037:</SPAN> <SPAN CLASS="comment">// Name: D3DUtil_CreateTexture()</SPAN>
<SPAN CLASS="linenum">0038:</SPAN> <SPAN CLASS="comment">// Desc: Helper function to create a texture. It checks the root path first,</SPAN>
<SPAN CLASS="linenum">0039:</SPAN> <SPAN CLASS="comment">//       then tries the DXSDK media path (as specified in the system registry).</SPAN>
<SPAN CLASS="linenum">0040:</SPAN> <SPAN CLASS="comment">//-----------------------------------------------------------------------------</SPAN>
<SPAN CLASS="linenum">0041:</SPAN> HRESULT D3DUtil_CreateTexture( LPDIRECT3DDEVICE8 pd3dDevice, TCHAR* strTexture,
<SPAN CLASS="linenum">0042:</SPAN>                                LPDIRECT3DTEXTURE8* ppTexture,
<SPAN CLASS="linenum">0043:</SPAN>                                D3DFORMAT d3dFormat = D3DFMT_UNKNOWN );
<SPAN CLASS="linenum">0044:</SPAN> 
<SPAN CLASS="linenum">0045:</SPAN> 
<SPAN CLASS="linenum">0046:</SPAN> 
<SPAN CLASS="linenum">0047:</SPAN> 
<SPAN CLASS="linenum">0048:</SPAN> <SPAN CLASS="comment">//-----------------------------------------------------------------------------</SPAN>
<SPAN CLASS="linenum">0049:</SPAN> <SPAN CLASS="comment">// Name: D3DUtil_SetColorKey()</SPAN>
<SPAN CLASS="linenum">0050:</SPAN> <SPAN CLASS="comment">// Desc: Changes all texels matching the colorkey to transparent, black.</SPAN>
<SPAN CLASS="linenum">0051:</SPAN> <SPAN CLASS="comment">//-----------------------------------------------------------------------------</SPAN>
<SPAN CLASS="linenum">0052:</SPAN> HRESULT D3DUtil_SetColorKey( LPDIRECT3DTEXTURE8 pTexture, DWORD dwColorKey );
<SPAN CLASS="linenum">0053:</SPAN> 
<SPAN CLASS="linenum">0054:</SPAN> 
<SPAN CLASS="linenum">0055:</SPAN> 
<SPAN CLASS="linenum">0056:</SPAN> 
<SPAN CLASS="linenum">0057:</SPAN> <SPAN CLASS="comment">//-----------------------------------------------------------------------------</SPAN>
<SPAN CLASS="linenum">0058:</SPAN> <SPAN CLASS="comment">// Name: D3DUtil_CreateVertexShader()</SPAN>
<SPAN CLASS="linenum">0059:</SPAN> <SPAN CLASS="comment">// Desc: Assembles and creates a file-based vertex shader</SPAN>
<SPAN CLASS="linenum">0060:</SPAN> <SPAN CLASS="comment">//-----------------------------------------------------------------------------</SPAN>
<SPAN CLASS="linenum">0061:</SPAN> HRESULT D3DUtil_CreateVertexShader( LPDIRECT3DDEVICE8 pd3dDevice, 
<SPAN CLASS="linenum">0062:</SPAN>                                     TCHAR* strFilename, DWORD* pdwVertexDecl,
<SPAN CLASS="linenum">0063:</SPAN>                                     DWORD* pdwVertexShader );
<SPAN CLASS="linenum">0064:</SPAN> 
<SPAN CLASS="linenum">0065:</SPAN>                                     
<SPAN CLASS="linenum">0066:</SPAN>                                     
<SPAN CLASS="linenum">0067:</SPAN>                                     
<SPAN CLASS="linenum">0068:</SPAN> <SPAN CLASS="comment">//-----------------------------------------------------------------------------</SPAN>
<SPAN CLASS="linenum">0069:</SPAN> <SPAN CLASS="comment">// Name: D3DUtil_GetCubeMapViewMatrix()</SPAN>
<SPAN CLASS="linenum">0070:</SPAN> <SPAN CLASS="comment">// Desc: Returns a view matrix for rendering to a face of a cubemap.</SPAN>
<SPAN CLASS="linenum">0071:</SPAN> <SPAN CLASS="comment">//-----------------------------------------------------------------------------</SPAN>
<SPAN CLASS="linenum">0072:</SPAN> D3DXMATRIX D3DUtil_GetCubeMapViewMatrix( DWORD dwFace );
<SPAN CLASS="linenum">0073:</SPAN> 
<SPAN CLASS="linenum">0074:</SPAN> 
<SPAN CLASS="linenum">0075:</SPAN> 
<SPAN CLASS="linenum">0076:</SPAN> 
<SPAN CLASS="linenum">0077:</SPAN> <SPAN CLASS="comment">//-----------------------------------------------------------------------------</SPAN>
<SPAN CLASS="linenum">0078:</SPAN> <SPAN CLASS="comment">// Name: D3DUtil_GetRotationFromCursor()</SPAN>
<SPAN CLASS="linenum">0079:</SPAN> <SPAN CLASS="comment">// Desc: Returns a quaternion for the rotation implied by the window's cursor</SPAN>
<SPAN CLASS="linenum">0080:</SPAN> <SPAN CLASS="comment">//       position.</SPAN>
<SPAN CLASS="linenum">0081:</SPAN> <SPAN CLASS="comment">//-----------------------------------------------------------------------------</SPAN>
<SPAN CLASS="linenum">0082:</SPAN> D3DXQUATERNION D3DUtil_GetRotationFromCursor( HWND hWnd,
<SPAN CLASS="linenum">0083:</SPAN>                                               FLOAT fTrackBallRadius=1.0f );
<SPAN CLASS="linenum">0084:</SPAN> 
<SPAN CLASS="linenum">0085:</SPAN> 
<SPAN CLASS="linenum">0086:</SPAN> 
<SPAN CLASS="linenum">0087:</SPAN> 
<SPAN CLASS="linenum">0088:</SPAN> <SPAN CLASS="comment">//-----------------------------------------------------------------------------</SPAN>
<SPAN CLASS="linenum">0089:</SPAN> <SPAN CLASS="comment">// Name: D3DUtil_SetDeviceCursor</SPAN>
<SPAN CLASS="linenum">0090:</SPAN> <SPAN CLASS="comment">// Desc: Builds and sets a cursor for the D3D device based on hCursor.</SPAN>
<SPAN CLASS="linenum">0091:</SPAN> <SPAN CLASS="comment">//-----------------------------------------------------------------------------</SPAN>
<SPAN CLASS="linenum">0092:</SPAN> HRESULT D3DUtil_SetDeviceCursor( LPDIRECT3DDEVICE8 pd3dDevice, HCURSOR hCursor,
<SPAN CLASS="linenum">0093:</SPAN>                                  BOOL bAddWatermark );
<SPAN CLASS="linenum">0094:</SPAN> 
<SPAN CLASS="linenum">0095:</SPAN> 
<SPAN CLASS="linenum">0096:</SPAN> 
<SPAN CLASS="linenum">0097:</SPAN> 
<SPAN CLASS="linenum">0098:</SPAN> <SPAN CLASS="comment">//-----------------------------------------------------------------------------</SPAN>
<SPAN CLASS="linenum">0099:</SPAN> <SPAN CLASS="comment">// Name: class CD3DArcBall</SPAN>
<SPAN CLASS="linenum">0100:</SPAN> <SPAN CLASS="comment">// Desc:</SPAN>
<SPAN CLASS="linenum">0101:</SPAN> <SPAN CLASS="comment">//-----------------------------------------------------------------------------</SPAN>
<SPAN CLASS="linenum">0102:</SPAN> <SPAN CLASS="keyword">class</SPAN> CD3DArcBall
<SPAN CLASS="linenum">0103:</SPAN> {
<SPAN CLASS="linenum">0104:</SPAN>     INT            m_iWidth;   <SPAN CLASS="comment">// ArcBall's window width</SPAN>
<SPAN CLASS="linenum">0105:</SPAN>     INT            m_iHeight;  <SPAN CLASS="comment">// ArcBall's window height</SPAN>
<SPAN CLASS="linenum">0106:</SPAN>     FLOAT          m_fRadius;  <SPAN CLASS="comment">// ArcBall's radius in screen coords</SPAN>
<SPAN CLASS="linenum">0107:</SPAN>     FLOAT          m_fRadiusTranslation; <SPAN CLASS="comment">// ArcBall's radius for translating the target</SPAN>
<SPAN CLASS="linenum">0108:</SPAN> 
<SPAN CLASS="linenum">0109:</SPAN>     D3DXQUATERNION m_qDown;               <SPAN CLASS="comment">// Quaternion before button down</SPAN>
<SPAN CLASS="linenum">0110:</SPAN>     D3DXQUATERNION m_qNow;                <SPAN CLASS="comment">// Composite quaternion for current drag</SPAN>
<SPAN CLASS="linenum">0111:</SPAN>     D3DXMATRIX     m_matRotation;         <SPAN CLASS="comment">// Matrix for arcball's orientation</SPAN>
<SPAN CLASS="linenum">0112:</SPAN>     D3DXMATRIX     m_matRotationDelta;    <SPAN CLASS="comment">// Matrix for arcball's orientation</SPAN>
<SPAN CLASS="linenum">0113:</SPAN>     D3DXMATRIX     m_matTranslation;      <SPAN CLASS="comment">// Matrix for arcball's position</SPAN>
<SPAN CLASS="linenum">0114:</SPAN>     D3DXMATRIX     m_matTranslationDelta; <SPAN CLASS="comment">// Matrix for arcball's position</SPAN>
<SPAN CLASS="linenum">0115:</SPAN>     BOOL           m_bDrag;               <SPAN CLASS="comment">// Whether user is dragging arcball</SPAN>
<SPAN CLASS="linenum">0116:</SPAN>     BOOL           m_bRightHanded;        <SPAN CLASS="comment">// Whether to use RH coordinate system</SPAN>
<SPAN CLASS="linenum">0117:</SPAN> 
<SPAN CLASS="linenum">0118:</SPAN>     D3DXVECTOR3 ScreenToVector( <SPAN CLASS="keyword">int</SPAN> sx, <SPAN CLASS="keyword">int</SPAN> sy );
<SPAN CLASS="linenum">0119:</SPAN> 
<SPAN CLASS="linenum">0120:</SPAN> <SPAN CLASS="keyword">public</SPAN>:
<SPAN CLASS="linenum">0121:</SPAN>     LRESULT     HandleMouseMessages( HWND, UINT, WPARAM, LPARAM );
<SPAN CLASS="linenum">0122:</SPAN> 
<SPAN CLASS="linenum">0123:</SPAN>     D3DXMATRIX* GetRotationMatrix()         { <SPAN CLASS="keyword">return</SPAN> &amp;m_matRotation; }
<SPAN CLASS="linenum">0124:</SPAN>     D3DXMATRIX* GetRotationDeltaMatrix()    { <SPAN CLASS="keyword">return</SPAN> &amp;m_matRotationDelta; }
<SPAN CLASS="linenum">0125:</SPAN>     D3DXMATRIX* GetTranslationMatrix()      { <SPAN CLASS="keyword">return</SPAN> &amp;m_matTranslation; }
<SPAN CLASS="linenum">0126:</SPAN>     D3DXMATRIX* GetTranslationDeltaMatrix() { <SPAN CLASS="keyword">return</SPAN> &amp;m_matTranslationDelta; }
<SPAN CLASS="linenum">0127:</SPAN>     BOOL        IsBeingDragged()            { <SPAN CLASS="keyword">return</SPAN> m_bDrag; }
<SPAN CLASS="linenum">0128:</SPAN> 
<SPAN CLASS="linenum">0129:</SPAN>     VOID        SetRadius( FLOAT fRadius );
<SPAN CLASS="linenum">0130:</SPAN>     VOID        SetWindow( INT w, INT h, FLOAT r=0.9 );
<SPAN CLASS="linenum">0131:</SPAN>     VOID        SetRightHanded( BOOL bRightHanded ) { m_bRightHanded = bRightHanded; }
<SPAN CLASS="linenum">0132:</SPAN> 
<SPAN CLASS="linenum">0133:</SPAN>     CD3DArcBall();
<SPAN CLASS="linenum">0134:</SPAN> };
<SPAN CLASS="linenum">0135:</SPAN> 
<SPAN CLASS="linenum">0136:</SPAN> 
<SPAN CLASS="linenum">0137:</SPAN> 
<SPAN CLASS="linenum">0138:</SPAN> 
<SPAN CLASS="linenum">0139:</SPAN> <SPAN CLASS="comment">//-----------------------------------------------------------------------------</SPAN>
<SPAN CLASS="linenum">0140:</SPAN> <SPAN CLASS="comment">// Name: class CD3DCamera</SPAN>
<SPAN CLASS="linenum">0141:</SPAN> <SPAN CLASS="comment">// Desc:</SPAN>
<SPAN CLASS="linenum">0142:</SPAN> <SPAN CLASS="comment">//-----------------------------------------------------------------------------</SPAN>
<SPAN CLASS="linenum">0143:</SPAN> <SPAN CLASS="keyword">class</SPAN> CD3DCamera
<SPAN CLASS="linenum">0144:</SPAN> {
<SPAN CLASS="linenum">0145:</SPAN>     D3DXVECTOR3 m_vEyePt;       <SPAN CLASS="comment">// Attributes for view matrix</SPAN>
<SPAN CLASS="linenum">0146:</SPAN>     D3DXVECTOR3 m_vLookatPt;
<SPAN CLASS="linenum">0147:</SPAN>     D3DXVECTOR3 m_vUpVec;
<SPAN CLASS="linenum">0148:</SPAN> 
<SPAN CLASS="linenum">0149:</SPAN>     D3DXVECTOR3 m_vView;
<SPAN CLASS="linenum">0150:</SPAN>     D3DXVECTOR3 m_vCross;
<SPAN CLASS="linenum">0151:</SPAN> 
<SPAN CLASS="linenum">0152:</SPAN>     D3DXMATRIX  m_matView;
<SPAN CLASS="linenum">0153:</SPAN>     D3DXMATRIX  m_matBillboard; <SPAN CLASS="comment">// Special matrix for billboarding effects</SPAN>
<SPAN CLASS="linenum">0154:</SPAN> 
<SPAN CLASS="linenum">0155:</SPAN>     FLOAT       m_fFOV;         <SPAN CLASS="comment">// Attributes for projection matrix</SPAN>
<SPAN CLASS="linenum">0156:</SPAN>     FLOAT       m_fAspect;
<SPAN CLASS="linenum">0157:</SPAN>     FLOAT       m_fNearPlane;
<SPAN CLASS="linenum">0158:</SPAN>     FLOAT       m_fFarPlane;
<SPAN CLASS="linenum">0159:</SPAN>     D3DXMATRIX  m_matProj;
<SPAN CLASS="linenum">0160:</SPAN> 
<SPAN CLASS="linenum">0161:</SPAN> <SPAN CLASS="keyword">public</SPAN>:
<SPAN CLASS="linenum">0162:</SPAN>     <SPAN CLASS="comment">// Access functions</SPAN>
<SPAN CLASS="linenum">0163:</SPAN>     D3DXVECTOR3 GetEyePt()           { <SPAN CLASS="keyword">return</SPAN> m_vEyePt; }
<SPAN CLASS="linenum">0164:</SPAN>     D3DXVECTOR3 GetLookatPt()        { <SPAN CLASS="keyword">return</SPAN> m_vLookatPt; }
<SPAN CLASS="linenum">0165:</SPAN>     D3DXVECTOR3 GetUpVec()           { <SPAN CLASS="keyword">return</SPAN> m_vUpVec; }
<SPAN CLASS="linenum">0166:</SPAN>     D3DXVECTOR3 GetViewDir()         { <SPAN CLASS="keyword">return</SPAN> m_vView; }
<SPAN CLASS="linenum">0167:</SPAN>     D3DXVECTOR3 GetCross()           { <SPAN CLASS="keyword">return</SPAN> m_vCross; }
<SPAN CLASS="linenum">0168:</SPAN> 
<SPAN CLASS="linenum">0169:</SPAN>     D3DXMATRIX  GetViewMatrix()      { <SPAN CLASS="keyword">return</SPAN> m_matView; }
<SPAN CLASS="linenum">0170:</SPAN>     D3DXMATRIX  GetBillboardMatrix() { <SPAN CLASS="keyword">return</SPAN> m_matBillboard; }
<SPAN CLASS="linenum">0171:</SPAN>     D3DXMATRIX  GetProjMatrix()      { <SPAN CLASS="keyword">return</SPAN> m_matProj; }
<SPAN CLASS="linenum">0172:</SPAN> 
<SPAN CLASS="linenum">0173:</SPAN>     VOID SetViewParams( D3DXVECTOR3 &amp;vEyePt, D3DXVECTOR3&amp; vLookatPt,
<SPAN CLASS="linenum">0174:</SPAN>                         D3DXVECTOR3&amp; vUpVec );
<SPAN CLASS="linenum">0175:</SPAN>     VOID SetProjParams( FLOAT fFOV, FLOAT fAspect, FLOAT fNearPlane,
<SPAN CLASS="linenum">0176:</SPAN>                         FLOAT fFarPlane );
<SPAN CLASS="linenum">0177:</SPAN> 
<SPAN CLASS="linenum">0178:</SPAN>     CD3DCamera();
<SPAN CLASS="linenum">0179:</SPAN> };
<SPAN CLASS="linenum">0180:</SPAN> 
<SPAN CLASS="linenum">0181:</SPAN> <SPAN CLASS="comment">//-----------------------------------------------------------------------------</SPAN>
<SPAN CLASS="linenum">0182:</SPAN> <SPAN CLASS="comment">// Helper macros for pixel shader instructions</SPAN>
<SPAN CLASS="linenum">0183:</SPAN> <SPAN CLASS="comment">//-----------------------------------------------------------------------------</SPAN>
<SPAN CLASS="linenum">0184:</SPAN> 
<SPAN CLASS="linenum">0185:</SPAN> <SPAN CLASS="comment">// Parameter writemasks</SPAN>
<SPAN CLASS="linenum">0186:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DPSP_WRITEMASK_B   D3DSP_WRITEMASK_0
<SPAN CLASS="linenum">0187:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DPSP_WRITEMASK_G   D3DSP_WRITEMASK_1
<SPAN CLASS="linenum">0188:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DPSP_WRITEMASK_R   D3DSP_WRITEMASK_2
<SPAN CLASS="linenum">0189:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DPSP_WRITEMASK_A   D3DSP_WRITEMASK_3
<SPAN CLASS="linenum">0190:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DPSP_WRITEMASK_C   (D3DPSP_WRITEMASK_B|D3DPSP_WRITEMASK_G|D3DPSP_WRITEMASK_R)
<SPAN CLASS="linenum">0191:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DPSP_WRITEMASK_ALL (D3DSP_WRITEMASK_0|D3DSP_WRITEMASK_1|D3DSP_WRITEMASK_2|D3DSP_WRITEMASK_3)
<SPAN CLASS="linenum">0192:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DPSP_WRITEMASK_10  (D3DSP_WRITEMASK_0|D3DSP_WRITEMASK_1)
<SPAN CLASS="linenum">0193:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DPSP_WRITEMASK_32  (D3DSP_WRITEMASK_2|D3DSP_WRITEMASK_3)
<SPAN CLASS="linenum">0194:</SPAN> 
<SPAN CLASS="linenum">0195:</SPAN> <SPAN CLASS="comment">// Source and destination parameter token</SPAN>
<SPAN CLASS="linenum">0196:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DPS_REGNUM_MASK(_Num)   ( (1L&lt;&lt;31) | ((_Num)&amp;D3DSP_REGNUM_MASK) )
<SPAN CLASS="linenum">0197:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DPS_DST(_Num)           ( D3DPS_REGNUM_MASK(_Num) | D3DSPR_TEMP | D3DPSP_WRITEMASK_ALL )
<SPAN CLASS="linenum">0198:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DPS_SRC_TEMP(_Num)      ( D3DPS_REGNUM_MASK(_Num) | D3DSP_NOSWIZZLE | D3DSPR_TEMP )
<SPAN CLASS="linenum">0199:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DPS_SRC_INPUT(_Num)     ( D3DPS_REGNUM_MASK(_Num) | D3DSP_NOSWIZZLE | D3DSPR_INPUT )
<SPAN CLASS="linenum">0200:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DPS_SRC_CONST(_Num)     ( D3DPS_REGNUM_MASK(_Num) | D3DSP_NOSWIZZLE | D3DSPR_CONST )
<SPAN CLASS="linenum">0201:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DPS_SRC_TEXTURE(_Num)   ( D3DPS_REGNUM_MASK(_Num) | D3DSP_NOSWIZZLE | D3DSPR_TEXTURE )
<SPAN CLASS="linenum">0202:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DVS_SRC_ADDR(_Num)      ( D3DPS_REGNUM_MASK(_Num) | D3DSP_NOSWIZZLE | D3DSPR_ADDR )
<SPAN CLASS="linenum">0203:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DVS_SRC_RASTOUT(_Num)   ( D3DPS_REGNUM_MASK(_Num) | D3DSP_NOSWIZZLE | D3DSPR_RASTOUT )
<SPAN CLASS="linenum">0204:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DVS_SRC_ATTROUT(_Num)   ( D3DPS_REGNUM_MASK(_Num) | D3DSP_NOSWIZZLE | D3DSPR_ATTROUT )
<SPAN CLASS="linenum">0205:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DVS_SRC_TEXCRDOUT(_Num) ( D3DPS_REGNUM_MASK(_Num) | D3DSP_NOSWIZZLE | D3DSPR_TEXCRDOUT )
<SPAN CLASS="linenum">0206:</SPAN> 
<SPAN CLASS="linenum">0207:</SPAN> <SPAN CLASS="comment">// Temp destination registers</SPAN>
<SPAN CLASS="linenum">0208:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_DR0   D3DPS_DST(0)
<SPAN CLASS="linenum">0209:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_DR1   D3DPS_DST(1)
<SPAN CLASS="linenum">0210:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_DR2   D3DPS_DST(2)
<SPAN CLASS="linenum">0211:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_DR3   D3DPS_DST(3)
<SPAN CLASS="linenum">0212:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_DR4   D3DPS_DST(4)
<SPAN CLASS="linenum">0213:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_DR5   D3DPS_DST(5)
<SPAN CLASS="linenum">0214:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_DR6   D3DPS_DST(6)
<SPAN CLASS="linenum">0215:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_DR7   D3DPS_DST(7)
<SPAN CLASS="linenum">0216:</SPAN> 
<SPAN CLASS="linenum">0217:</SPAN> <SPAN CLASS="comment">// Temp source registers</SPAN>
<SPAN CLASS="linenum">0218:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_SR0   D3DPS_SRC_TEMP(0)
<SPAN CLASS="linenum">0219:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_SR1   D3DPS_SRC_TEMP(1)
<SPAN CLASS="linenum">0220:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_SR2   D3DPS_SRC_TEMP(2)
<SPAN CLASS="linenum">0221:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_SR3   D3DPS_SRC_TEMP(3)
<SPAN CLASS="linenum">0222:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_SR4   D3DPS_SRC_TEMP(4)
<SPAN CLASS="linenum">0223:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_SR5   D3DPS_SRC_TEMP(5)
<SPAN CLASS="linenum">0224:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_SR6   D3DPS_SRC_TEMP(6)
<SPAN CLASS="linenum">0225:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_SR7   D3DPS_SRC_TEMP(7)
<SPAN CLASS="linenum">0226:</SPAN> 
<SPAN CLASS="linenum">0227:</SPAN> <SPAN CLASS="comment">// Texture parameters</SPAN>
<SPAN CLASS="linenum">0228:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_T0   D3DPS_SRC_TEXTURE(0)
<SPAN CLASS="linenum">0229:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_T1   D3DPS_SRC_TEXTURE(1)
<SPAN CLASS="linenum">0230:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_T2   D3DPS_SRC_TEXTURE(2)
<SPAN CLASS="linenum">0231:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_T3   D3DPS_SRC_TEXTURE(3)
<SPAN CLASS="linenum">0232:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_T4   D3DPS_SRC_TEXTURE(4)
<SPAN CLASS="linenum">0233:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_T5   D3DPS_SRC_TEXTURE(5)
<SPAN CLASS="linenum">0234:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_T6   D3DPS_SRC_TEXTURE(6)
<SPAN CLASS="linenum">0235:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_T7   D3DPS_SRC_TEXTURE(7)
<SPAN CLASS="linenum">0236:</SPAN> 
<SPAN CLASS="linenum">0237:</SPAN> <SPAN CLASS="comment">// Constant (factor) source parameters</SPAN>
<SPAN CLASS="linenum">0238:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_C0     D3DPS_SRC_CONST(0)
<SPAN CLASS="linenum">0239:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_C1     D3DPS_SRC_CONST(1)
<SPAN CLASS="linenum">0240:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_C2     D3DPS_SRC_CONST(2)
<SPAN CLASS="linenum">0241:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_C3     D3DPS_SRC_CONST(3)
<SPAN CLASS="linenum">0242:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_C4     D3DPS_SRC_CONST(4)
<SPAN CLASS="linenum">0243:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_C5     D3DPS_SRC_CONST(5)
<SPAN CLASS="linenum">0244:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_C6     D3DPS_SRC_CONST(6)
<SPAN CLASS="linenum">0245:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_C7     D3DPS_SRC_CONST(7)
<SPAN CLASS="linenum">0246:</SPAN> 
<SPAN CLASS="linenum">0247:</SPAN> <SPAN CLASS="comment">// Iterated source parameters (0==Diffuse, 1==specular)</SPAN>
<SPAN CLASS="linenum">0248:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_V0     D3DPS_SRC_INPUT(0)
<SPAN CLASS="linenum">0249:</SPAN> <SPAN CLASS="keyword">#define</SPAN> D3DS_V1     D3DPS_SRC_INPUT(1)
<SPAN CLASS="linenum">0250:</SPAN> 
<SPAN CLASS="linenum">0251:</SPAN> 
<SPAN CLASS="linenum">0252:</SPAN> 
<SPAN CLASS="linenum">0253:</SPAN> 
<SPAN CLASS="linenum">0254:</SPAN> <SPAN CLASS="keyword">#endif</SPAN> <SPAN CLASS="comment">// D3DUTIL_H</SPAN>
<SPAN CLASS="linenum">0255:</SPAN> </PRE>
</BODY>
</HTML>
